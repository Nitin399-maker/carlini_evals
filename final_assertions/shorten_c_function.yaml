description: "Test if the model can significantly shorten a repetitive C functions."
providers:
  - id: openai:o3
    config: 
      max_tokens: 8192

defaultTest:
  assert: []
  vars: {}

tests:
  - description: "Test if the model can significantly shorten a repetitive C functions."
    vars:
      prompt: |-
        Code golf this function to be a lot shorter. You only get points if it's <300 bytes (not counting whitespace). Keep the name `stepper`.

        ```
        void stepper(int xw) {
        int Steps = 0;
        for (int x = 0; x < xw; x++) {
        switch (Steps) {
        case 0:
        digitalWrite(1, 0);
        digitalWrite(2, 0);
        digitalWrite(3, 0);
        digitalWrite(4, 1);
        break;
        case 1:
        digitalWrite(1, 0);
        digitalWrite(2, 0);
        digitalWrite(3, 1);
        digitalWrite(4, 1);
        break;
        case 2:
        digitalWrite(1, 0);
        digitalWrite(2, 0);
        digitalWrite(3, 1);
        digitalWrite(4, 0);
        break;
        case 3:
        digitalWrite(1, 0);
        digitalWrite(2, 1);
        digitalWrite(3, 1);
        digitalWrite(4, 0);
        break;
        case 4:
        digitalWrite(1, 0);
        digitalWrite(2, 1);
        digitalWrite(3, 0);
        digitalWrite(4, 0);
        break;
        case 5:
        digitalWrite(1, 1);
        digitalWrite(2, 1);
        digitalWrite(3, 0);
        digitalWrite(4, 0);
        break;
        case 6:
        digitalWrite(1, 1);
        digitalWrite(2, 0);
        digitalWrite(3, 0);
        digitalWrite(4, 0);
        break;
        case 7:
        digitalWrite(1, 1);
        digitalWrite(2, 0);
        digitalWrite(3, 0);
        digitalWrite(4, 1);
        break;
        default:
        digitalWrite(1, 0);
        digitalWrite(2, 0);
        digitalWrite(3, 0);
        digitalWrite(4, 0);
        break;
        }
        Steps = (Steps + 1) % 8;
        }
        }
        ```
    assert:
      - type: python
        value: "file://shorten_c_function.py:check_c_code_golf"

writeLatestResults: true
commandLineOptions:
  cache: true